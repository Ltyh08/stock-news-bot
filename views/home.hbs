            <!DOCTYPE html>
            <html lang="en">
            <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Stock Market News</title>

            <!-- Bootstrap CSS -->
            <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            >

            <!-- Custom Styles -->
            <link rel="stylesheet" href="public/styles.css">
            </head>
            <body>

            <div class="container">
            <h1 class="text-center mb-4">Stock Market News</h1>

            <!-- Search Bar -->
            <div class="mb-4">
            <div class="input-group">
                <input type="text" id="searchInput" class="form-control" placeholder="Search by ticker (e.g. AAPL)" oninput="liveSearchNews()">
            </div>
            </div>

            <div class="row">
                {{#each news}}
                    <div class="col-md-4 mb-4 d-flex">
                        <div class="news-item news-card">
                            {{#if this.image_url}}
                                <img src="{{this.image_url}}" alt="News Image" class="news-image">
                            {{/if}}
                            
                            <h2 class="news-title">{{this.title}}</h2>
                            
                            <p class="news-description">
                                {{#if this.description}}
                                    {{this.description}}
                                {{else}}
                                    No Description
                                {{/if}}
                            </p>
                            
                            <a href="{{this.url}}" target="_blank" class="read-more">Read More</a>
                            
                            <p class="news-source">
                                <strong>Source:</strong> {{this.source}} | 
                                <strong>Published:</strong> {{this.published_at}}
                            </p>
                        </div>
                    </div>
                {{/each}}
            </div>
            </div>

            <!-- Bootstrap JS -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
let debounceTimer;


function liveSearchNews() {
    const ticker = document.getElementById('searchInput').value.trim();

    clearTimeout(debounceTimer);

    debounceTimer = setTimeout(() => {
        if (!ticker) {
            // If input is cleared, fetch default news
            fetch('/api/news')
                .then(res => res.json())
                .then(renderNews)
                .catch(err => console.error("❌ Failed to fetch default news:", err));
            return;
        }

        fetch(`/api/news/search?ticker=${encodeURIComponent(ticker)}`)
            .then(res => res.json())
            .then(renderNews)
            .catch(err => {
                console.error("❌ Live search failed:", err);
            });
    }, 300); // Delay by 300ms
}

function renderNews(data) {
    const row = document.querySelector('.row');
    row.innerHTML = '';

    if (data.length === 0) {
        row.innerHTML = '<p class="text-center">No news found for this ticker.</p>';
        return;
    }

    data.forEach(article => {
        const card = `
            <div class="col-md-4 mb-4 d-flex">
                <div class="news-item news-card">
                    ${article.image_url ? `<img src="${article.image_url}" alt="News Image" class="news-image">` : ''}
                    <h2 class="news-title">${article.title}</h2>
                    <p class="news-description">${article.description || "No Description"}</p>
                    <a href="${article.url}" target="_blank" class="read-more">Read More</a>
                    <p class="news-source">
                        <strong>Source:</strong> ${article.source} |
                        <strong>Published:</strong> ${new Date(article.published_at).toLocaleString()}
                    </p>
                </div>
            </div>
        `;
        row.innerHTML += card;
    });
}
</script>


            </body>
            </html>
